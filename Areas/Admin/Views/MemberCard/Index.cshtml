@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    @*begin::Subheader*@
    <div class="subheader py-2 py-lg-6 subheader-solid" id="kt_subheader">
        <div class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
            @*begin::Info*@
            <div class="d-flex align-items-center flex-wrap mr-1">
                @* begin::Page Heading*@
                <div class="d-flex align-items-baseline flex-wrap mr-5">
                    @*begin::Page Title*@
                    <h5 class="text-dark font-weight-bold my-1 mr-5">Danh sách tài khoản</h5>
                    @*end::Page Title
                        begin::Breadcrumb*@
                    <ul class="breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 font-size-sm">
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">Quản trị</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">Tài khoản quản trị</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">Danh sách tài khoản</a>
                        </li>
                    </ul>
                    @*end::Breadcrumb*@
                </div>
                @*end::Page Heading*@
            </div>
            @*end::Info*@
            @*begin::Toolbar*@
            <div class="d-flex align-items-center">

            </div>
            @*end::Toolbar*@
        </div>
    </div>
    @*end::Subheader
        begin::Entry*@

    @*begin::Container*@


    @*begin::Card*@
    <div class="card card-custom">
        <div class="card-header flex-wrap border-0 pt-6 pb-0">
            <div class="card-title">

            </div>
            <div class="card-toolbar">
                <div class="dropdown dropdown-inline mr-2">
                    <button type="button" class="btn btn-light-primary font-weight-bolder dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="svg-icon svg-icon-md">

                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24" />
                                    <path d="M3,16 L5,16 C5.55228475,16 6,15.5522847 6,15 C6,14.4477153 5.55228475,14 5,14 L3,14 L3,12 L5,12 C5.55228475,12 6,11.5522847 6,11 C6,10.4477153 5.55228475,10 5,10 L3,10 L3,8 L5,8 C5.55228475,8 6,7.55228475 6,7 C6,6.44771525 5.55228475,6 5,6 L3,6 L3,4 C3,3.44771525 3.44771525,3 4,3 L10,3 C10.5522847,3 11,3.44771525 11,4 L11,19 C11,19.5522847 10.5522847,20 10,20 L4,20 C3.44771525,20 3,19.5522847 3,19 L3,16 Z" fill="#000000" opacity="0.3" />
                                    <path d="M16,3 L19,3 C20.1045695,3 21,3.8954305 21,5 L21,15.2485298 C21,15.7329761 20.8241635,16.200956 20.5051534,16.565539 L17.8762883,19.5699562 C17.6944473,19.7777745 17.378566,19.7988332 17.1707477,19.6169922 C17.1540423,19.602375 17.1383289,19.5866616 17.1237117,19.5699562 L14.4948466,16.565539 C14.1758365,16.200956 14,15.7329761 14,15.2485298 L14,5 C14,3.8954305 14.8954305,3 16,3 Z" fill="#000000" />
                                </g>
                            </svg>

                        </span>Xuất
                    </button>

                    <div class="dropdown-menu dropdown-menu-sm dropdown-menu-right">

                        <ul class="navi flex-column navi-hover py-2">
                            <li class="navi-header font-weight-bolder text-uppercase font-size-sm text-primary pb-2">Choose an option:</li>
                          
                            <li class="navi-item">
                                <a href="/Admin/MemberCard/ExportToExcel" class="navi-link">
                                    <span class="navi-icon">
                                        <i class="la la-file-excel-o"></i>
                                    </span>
                                    <span class="navi-text">Excel</span>
                                </a>
                            </li>
                            
                        </ul>

                    </div>

                </div>
                @*begin::Dropdown*@
                <div class="dropdown dropdown-inline mr-2">
                    @*begin::Button**@
                    <a href="javascript:void(0)" data-toggle="modal" data-target="#UploadFileModal" class="btn btn-success font-weight-bolder">
                        <span class="svg-icon svg-icon-md">
                            @*begin::Svg Icon | path:assets/media/svg/icons/Design/Flatten.svg*@
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24" />
                                    <path d="M5.85714286,2 L13.7364114,2 C14.0910962,2 14.4343066,2.12568431 14.7051108,2.35473959 L19.4686994,6.3839416 C19.8056532,6.66894833 20,7.08787823 20,7.52920201 L20,20.0833333 C20,21.8738751 19.9795521,22 18.1428571,22 L5.85714286,22 C4.02044787,22 4,21.8738751 4,20.0833333 L4,3.91666667 C4,2.12612489 4.02044787,2 5.85714286,2 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                    <path d="M8.95128003,13.8153448 L10.9077535,13.8153448 L10.9077535,15.8230161 C10.9077535,16.0991584 11.1316112,16.3230161 11.4077535,16.3230161 L12.4310522,16.3230161 C12.7071946,16.3230161 12.9310522,16.0991584 12.9310522,15.8230161 L12.9310522,13.8153448 L14.8875257,13.8153448 C15.1636681,13.8153448 15.3875257,13.5914871 15.3875257,13.3153448 C15.3875257,13.1970331 15.345572,13.0825545 15.2691225,12.9922598 L12.3009997,9.48659872 C12.1225648,9.27584861 11.8070681,9.24965194 11.596318,9.42808682 C11.5752308,9.44594059 11.5556598,9.46551156 11.5378061,9.48659872 L8.56968321,12.9922598 C8.39124833,13.2030099 8.417445,13.5185067 8.62819511,13.6969416 C8.71848979,13.773391 8.8329684,13.8153448 8.95128003,13.8153448 Z" fill="#000000" />
                                </g>
                            </svg>
                            @*end::Svg Icon*@
                        </span>Thêm file dữ liệu thẻ
                    </a>
                    @*end::Button*@
                </div>
            </div>
        </div>
        <div class="card-body">
            @*begin: Search Form
                begin::Search Form*@
            <div class="mb-7">
                <div class="row align-items-center">
                    <div class="col-lg-9 col-xl-8">
                        <div class="row align-items-center">

                            <div class="col-md-4 my-2 my-md-0">
                                <div class="input-icon">
                                    <input type="text" class="form-control" placeholder="Search..." id="kt_datatable_search_query" />
                                    <span>
                                        <i class="flaticon2-search-1 text-muted"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4 my-2 my-md-0">
                                <div class="d-flex align-items-center">
                                    <label class="mr-3 mb-0 d-none d-md-block">Trạng thái:</label>
                                    <select class="form-control select2" id="search_status">
                                        <option value="">Tất cả</option>
                                        <option value="True">Đã kích hoạt</option>
                                        <option value="False">Chưa kích hoạt</option>

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4 my-2 my-md-0">
                                <div class="d-flex align-items-center">
                                    <label class="mr-3 mb-0 d-none d-md-block">Cấp độ thẻ:</label>
                                    <select class="form-control select2" id="search_level">
                                        <option value="">Tất cả</option>
                                        @{
                                            bool isWelcome = true;
                                        }
                                        @foreach (var level in ViewBag.Level)
                                        {
                                            if (level.LevelName == "Welcome")
                                            {
                                                if (isWelcome)
                                                {
                                                    <option value="@level.ID">@level.LevelName (Chưa có thông tin thành viên)</option>
                                                    isWelcome = false;
                                                }
                                                else
                                                {
                                                    <option value="@level.ID">@level.LevelName (Đã có thông tin thành viên)</option>

                                                }
                                            }
                                            else
                                            {
                                                <option value="@level.ID">@level.LevelName</option>

                                            }
                                        }
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
            @*end::Search *@
            @*end: Search Form*@


            @*begin: Datatable*@
            <div class="table-responsive" style="position: relative; height: 440px; overflow: auto;">
                <table id="membercardtable" class="table">
                    <thead style="position: sticky; top: 0px; background: white">
                        <tr>
                            <th scope="col">#</th>
                            @*<th scope="col">Mã thẻ</th>*@
                            <th scope="col">Serial Number</th>
                            <th scope="col">Cấp độ thẻ</th>
                            <th scope="col">Người sở hữu</th>
                            <th scope="col">Trạng thái</th>
                            <th scope="col">Hành động</th>
                            

                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <div class="spinner spinner-success spinner-lg mr-15" style=" position: absolute; left: 50%; transform: translate(-50%, -50%);display:none"></div>
            </div>
            @*end: Datatable*@
            <div class="d-flex justify-content-between align-items-center flex-wrap">
                <div class="d-flex flex-wrap py-2 mr-3">

                </div>
                <div class="d-flex align-items-center py-3">
                    <span class="text-muted" id="QtyNote"></span>
                </div>
            </div>
        </div>
        @*end::Card*@
    </div>
    @*end::Container*@


</div>
<!-- Modal-->
<div class="modal fade" id="UploadFileModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="staticBackdrop" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Thêm File thẻ</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i aria-hidden="true" class="ki ki-close"></i>
                </button>
            </div>
            <form id="uploadForm" method="POST">
                <div class="modal-body">

                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">File nhập</label>
                        <div class="col-sm-9">
                            <input type="file" id="excelFile" class="form-control" name="file" />
                        </div>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>
                    <button type="button" id="UploadFile" class="btn btn-primary font-weight-bold">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="~/Areas/assets/admin/membercard/MemberCard.js"></script>
<script src="~/Areas/assets/admin/FormatDate.js"></script>
<script src="~/Areas/assets/admin/upload/UploadFile.js"></script>


@*
    <script>
        document.addEventListener('DOMContentLoaded', function (e) {
            FormValidation.formValidation(document.getElementById('uploadForm'), {
                fields: {
                    file: {
                        validators: {
                            notEmpty: {
                                message: 'Vui lòng chọn file',
                            },
                            file: {
                                extension: 'xls',
                                type: 'application/vnd.ms-excel',

                                message: 'File không hợp lệ',
                            },
                        },
                    },
                },
                plugins: {
                    trigger: new FormValidation.plugins.Trigger(),
                    bootstrap: new FormValidation.plugins.Bootstrap(),
                    submitButton: new FormValidation.plugins.SubmitButton(),
                    icon: new FormValidation.plugins.Icon({
                        valid: 'fa fa-check',
                        invalid: 'fa fa-times',
                        validating: 'fa fa-refresh',
                    }),
                },
            });
        });
    </script>*@